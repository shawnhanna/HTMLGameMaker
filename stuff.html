<html>
<head>
	<link href="bootstrap.css" rel="stylesheet" type="text/css">
	<link href="style.css" rel="stylesheet" type="text/css" /> 
	<title>gameshit</title
	<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
	
	<script type="text/javascript">

	function myFunction()
	{
	}

	var _selectedObject = null;
	var _selectedBlueprint = null;
	var commandList = new Array();

	function setVelocityX(speed)
	{
		if (_selectedObject == null)
		{
			alert("ERROR: setVelocityX run w/o a selected object");
			return false;
		}
		else
		{
			///todo: fix to match engine
			_selectedBlueprint.velocity.X = speed;
		}
	}

	function setVelocityY(speed)
	{
		if (_selectedObject == null)
		{
			alert("ERROR: setVelocityY run w/o a selected object");
			return false;
		}
		else
		{
			///todo: fix to match engine
			_selectedBlueprint.velocity.Y = speed;
		}
	}

	function setVelocity(speed, radians)
	{
		if (_selectedObject == null)
		{
			alert("ERROR: setVelocityX run w/o a selected object");
			return false;
		}
		else
		{
			if (setVelocityX(speed*Math.cos(radians)))
			{
				if (setVelocityY(speed*Math.sin(radians)))
				{
					return true;
				}
			}
			alert("ERROR setting velocity with speed = "+speed + " and radians = " + radians);
			return false;
		}
	}

	function reverseVelX ()
	{
		if (_selectedObject == null)
		{
			alert("ERROR: reverseX run w/o a selected object");
			return false;
		}
		else
		{
			_selectedObject.velocity.X = -1 * _selectedObject.velocity.X;

		}
	}

	function reverseVelY ()
	{
		if (_selectedObject == null)
		{
			alert("ERROR: reverseY run w/o a selected object");
			return false;
		}
		else
		{
			_selectedObject.velocity.X = -1 * _selectedObject.velocity.X;

		}
	}

	function setOnCollide()
	{
		if (_selectedBlueprint == null)
		{
			alert("ERROR: setOnCollide run w/o a selected blueprint");
			return false;
		}
		else
		{
			$('#test').off('onCollide');
			$("#test").on("onCollide", function()
			{
				eval($("#text").val());
			});
		}
	}

	function addVelX () {
		//velocity = $("#addVelX").val();
		velocity = prompt("Enter a velocity", "0");
		commandList.push("setVelocityX("+velocity+");");
		redrawTextArea();
	}
	function addVelY () {
		//velocity = $("#addVelX").val();
		velocity = prompt("Enter a velocity", "0");
		commandList.push("setVelocityY("+velocity+");");
		redrawTextArea();
	}

	function reverseX() {
		commandList.push("reverseVelX();");
		redrawTextArea();
	}
	function reverseY() {
		commandList.push("reverseVelY();");
		redrawTextArea();
	}

	function instantiateObject() {
		if (_selectedBlueprint == null)
		{
			alert("ERROR: instantiateObject run w/o a selected blueprint");
			return false;
		}
		else
		{
			///TODO: add instantiation code
		}
	}

	function destroyObject ()
	{
		if (_selectedBlueprint == null)
		{
			alert("ERROR: destroyObject run w/o a selected blueprint");
			return false;
		}
		else
		{
			//TODO: add destruction code
		}
	}

	function createBlueprint () {
		//todo: add code for creation of new blueprint
	}

	function redrawTextArea()
	{
		for (var i = 0; i<commandList.length; i++) {
			$("#text").val( $("#text").val() + commandList[i] + "\n");
		};
	}

	</script>
</head>
<body>

	<div id="content">
		<div class="navbar navbar-inverse navbar-fixed-top">
  			<div class="navbar-inner">
    			<a class="brand" href="#">gameshit</a>
    			<ul class="nav pull-right">
      				<li class="active"></a></li>
					<li><a href="index.html">Home</a></li>
					<li><a href="stuff.html">stuff</a></li>
    			</ul>
  			</div>
		</div>
	</div>
	
	<div id="main">
	
		<div id="canvas">
			
		</div>
		
		<div class="left">
			<h2>
				Objects
			</h2>			
			
		</div>
		
		<div class="right">
			<h2>
				Blueprints
			</h2>
		</div>		
			<div id="bottom">
				<div class="hero-unit">
					<div id="textEdit">
						<textarea id="text" rows="10" cols="10"></textarea>
					</div>	
					<table class=" table-nonfluid">
						<tbody>
							<tr>
							<td><button id="addVelX" class="btn btn-inverse what" onclick="addVelX();">Set velocity (x)</button></td>
							<td><button id="addVelY" class="btn btn-inverse what"onclick="addVelY();">Set velocity (y)</button></td>
							<td><button id="addVelA" class="btn btn-inverse what"onclick="addVelAngle();">Set velocity (speed & angle in radians)</button>
							<td><button id="addPosRelX" class="btn btn-inverse what"onclick="addPosRelativeX();">Set relative pos (x)</button></td>
							<td><button id="addPosRelY" class="btn btn-inverse what"onclick="addPosRelativeY();">Set relative pos (y)</button></td>
							</tr>
							<tr>
							<td><button id="reverseXButton" class="btn btn-inverse what"onclick="reverseX();">Reverse velocity (x)</button></td>
							<td><button id="reverseYButton" class="btn btn-inverse what"onclick="reverseY();">Reverse velocity (y)</button></td>
							</tr>
							<tr>
							<td><button id="addInstantiateObject" class="btn btn-inverse what"onclick="addInstantiateObject();">Create object</button></td>
							<!-- Only after instantiated button has been pressed -->
							<td><button id="addInstantiateObjectVelY" class="btn btn-inverse what"onclick="addInstantiateObjectVelY();">Set created object vel y</button></td>
							<td><button id="addInstantiateObjectVelX" class="btn btn-inverse what"onclick="addInstantiateObjectVelX();">Set created object vel x</button></td>
							<td><button id="addInstantiateObjectPosY" class="btn btn-inverse what"onclick="addInstantiateObjectPosY();">Set created object pos y</button></td>
							<td><button id="addInstantiateObjectPosX" class="btn btn-inverse what"onclick="addInstantiateObjectPosX();">Set created object pos x</button></td>
							<td><button id="doneInstantiatedButton" class="btn btn-inverse what"onclick="hideInstantiated();" >Done with instantiation</button>
							</tr>
							<tr>
							<td><button id="destroySelf" class="btn btn-inverse what"onclick="addDestroySelf();">Destroy self</button></td>
							</tr>
							<tr>
							<!-- Only if in Collider Set of buttons -->
							<td><button id="ifColliderTag" class="btn btn-inverse what"onclick="addIfColliderTag();">if (collider.tag == ''){} </button></td>
							<td><button id="destroyCollider" class="btn btn-inverse what"onclick="addDestroyCollider();">Destroy collider</button></td>
							</tr>
							<tr>
							<!-- Only if in update set of buttons -->
							<td><button id="ifKeyPressed" class="btn btn-inverse what"onclick="addInputKeyPressed();">if (key pressed){} </button></td>
							<td><button id="ifKeyDown" class="btn btn-inverse what"onclick="addInputKeyDown();">if (key down){} </button></td>
							<td><button id="ifKeyUp" class="btn btn-inverse what"onclick="addInputKeyUp();">if (key up){} </button></td>
							</tr>
							<tr>
							<td><button class="btn btn-inverse what" onclick="endIf()">End If</button></td>
							</tr>
							<tr>
							<td><button class="btn btn-inverse what" onclick="save()">Save</button></td>
							<td><button class="btn btn-inverse what" onclick="createBlueprint()">Create blueprint</button></td>
							<td><button class="btn btn-inverse what" onclick="loadJSON()">load blueprint</button></td>
							</tr>
							<tr>
							<td><button class="btn btn-inverse what" onclick='changeEditingState("collide");'>Modify oncollide</button></td>
							<td><button class="btn btn-inverse what" onclick='changeEditingState("init");'>Modify oninit</button></td>
							<td><button class="btn btn-inverse what" onclick='changeEditingState("update");'>Modify onupdate</button></td>
							</tr>
						</tbody>
					</table>
				<div>	
			</div>
		</div>
	</div>
</div>
</body>
</html>